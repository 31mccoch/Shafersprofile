function sweptCollision(oldX, oldY, newX, newY, paddle) {
  let top = paddle.y - paddle.depth;
  let rect = {x:paddle.x, y:top, w:paddle.w, h:paddle.h};

  if ((paddle === player && ball.dy > 0) || (paddle === computer && ball.dy < 0)) {
    let steps = 8;
    for (let i=1; i<=steps; i++) {
      let t = i/steps;
      let ix = oldX + (newX-oldX)*t;
      let iy = oldY + (newY-oldY)*t;
      let tempBall = {x:ix, y:iy, r:ball.r};

      if (circleRectOverlap(tempBall, rect)) {
        ball.x = ix;
        ball.y = iy;

        // bounce
        if (paddle === player) {
          ball.y = rect.y - ball.r;
          ball.dy = -Math.abs(ball.dy);

          // ✅ Count hit as a point
          score++;
          if (score > highScore) {
            highScore = score;
            document.getElementById("highScore").innerText = "High Score: " + highScore;
          }

        } else {
          ball.y = rect.y + rect.h + ball.r;
          ball.dy = Math.abs(ball.dy);
        }

        // angle / spin
        let hitPos = (ball.x - (rect.x+rect.w/2)) / (rect.w/2);
        ball.dx = BASE_SPEED * hitPos;

        if (paddle === player) {
          let power = paddle.depth/(canvas.height/2);
          ball.dx *= (1+0.5*power);
          ball.dy *= (1+0.5*power);
        }

        normalizeBallSpeed();
        return;
      }
    }
  }
}
if (ball.y + ball.r < 0) {
  // computer missed → just reset ball
  resetBall(true);
}
